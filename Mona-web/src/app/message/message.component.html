
<div class="users">

  <ul>
    <li
     [ngClass]="{'bg-slate-900 text-white': user === selectedChat} "
      class="text-black bg-white" (click)="selectChat(user)"
       *ngFor="let user of users">
       {{ user.firstName }} {{user.lastName}}
       <span >{{getIncomingMessagesCount(user) }}⬇️</span>
       <span>⬆️{{getSentMessagesCount(user)}}</span>
      </li>
  </ul>

</div>

<div class="chat bg-slate-300">
  <h2 class="text-green-700">{{ selectedChat?.firstName }} {{selectedChat?.lastName}}</h2>
  <form *ngIf="selectedChat"   [formGroup]="inputGroup">
    <p *ngIf="repliedMessage">{{repliedMessage.text}}</p>
    <p *ngIf="editingMessage">{{editingMessage.text}}</p>
    <input  formControlName="message" type="text" [value]="this.inputGroup.value.message" >
    <input type="file" class="file-input"  [value]="this.inputGroup.value.file" (change)=" onFileSelected($event)" >
    <button (click)="sendMessage()" *ngIf="!this.editingMessage">send</button>
    <button (click)="sendMessage()" *ngIf="this.editingMessage" >edit</button>
    <ul>
      <li *ngFor="let message of income">
            <app-message-item
              [message]="message"
              [selectedChat]="selectedChat"
              [editingMessage]="editingMessage"
              (editMessageEvent)="editMessage($event)"
              (deleteMessageForMyselfEvent)="deleteMessageForMyself($event)"
              (deleteMessageForEveryoneEvent)="deleteMessageForEveryone($event)"
              (replyMessageEvent)="replyMessage($event)"
            >
            </app-message-item >
        </li>
    </ul>
  </form>
</div>



